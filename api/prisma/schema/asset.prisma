enum AssetType {
    IMAGE
    VIDEO
    AUDIO
    DOCUMENT
}

model Asset {
    id String @id @default(uuid())

    originalName    String
    name            String
    type            AssetType
    mimeType        String
    fileSize        Int
    source          String
    preview         String?
    storageProvider String?
    channelToken    String
    autoGenerated   Boolean   @default(false)

    width      Int?  @default(0)
    height     Int?  @default(0)
    focalPoint Json?

    productFeaturedImages   Product[]      @relation("ProductFeaturedImage")
    productDocuments        Product[]      @relation("ProductDocuments")
    variants                ImageVariant[]
    collections             Collection[]   @relation("CollectionDocuments")
    collectionFeaturedImage Collection?    @relation("CollectionFeaturedImage")

    createdAt DateTime? @default(now())
    updatedAt DateTime? @updatedAt
    updatedBy String?
    createdBy String?
    deletedAt DateTime?
    deletedBy String?
}

model ImageVariant {
    id      String @id @default(uuid())
    assetId String

    variantName   String
    width         Int
    height        Int
    mimeType      String
    fileSize      Int
    source        String
    preview       String?
    channelToken  String
    autoGenerated Boolean @default(false)

    storageProvider String?

    asset Asset @relation(fields: [assetId], references: [id], onDelete: Cascade, onUpdate: Cascade)

    createdAt DateTime? @default(now())
    updatedAt DateTime? @updatedAt
    updatedBy String?
    createdBy String?
    deletedAt DateTime?
    deletedBy String?
}
